### üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ NumericGeneralizationOperation

---

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏
- –ü—Ä–∏–≤–µ—Å—Ç–∏ NumericGeneralizationOperation –∫ –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π `pamola_core/utils/ops`.
- –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É `run()` –∏ `execute()`.
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ unified error reporting.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π progress tracking.
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (json –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π) –≤ –µ–¥–∏–Ω—ã–π `{task_dir}`.
- –í–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (`use_cache`).

---

### üî® –û–±—ä–µ–º —Ä–∞–±–æ—Ç

#### **1Ô∏è‚É£ base_anonymization_op.py**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `BaseOperation` (execute ‚Üí process_batch).
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `execute()`.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `progress_tracker` –¥–ª—è —ç—Ç–∞–ø–æ–≤: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫, —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è.
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å error reporting (—á–µ—Ä–µ–∑ OperationResult + logger).

#### **2Ô∏è‚É£ commons (metric_utils, processing_utils, validation_utils)**
- **metric_utils.py** ‚Üí –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ `op_data_writer.py` ‚Üí –≤—Å–µ json (–º–µ—Ç—Ä–∏–∫–∏) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `{task_dir}`.
- **processing_utils.py** ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å batch-–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–æ–º (`process_in_chunks`), —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏.
- **validation_utils.py** ‚Üí –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ error reporting —á–µ—Ä–µ–∑ logger/OperationResult, —É–±—Ä–∞—Ç—å —Å—ã—Ä—ã–µ ValueError.

#### **3Ô∏è‚É£ numeric_op.py**
- –£–±—Ä–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π `run()`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π `execute()`.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π `progress_tracker`.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É REPLACE/ENRICH —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö –ø–æ–ª–µ–π.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É `process_value` –¥–ª—è –ø—É—Å—Ç—ã—Ö/—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–≤–æ–∑–≤—Ä–∞—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ).
- –í–Ω–µ–¥—Ä–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (task_dir/cache/, —Ö—ç—à –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ + –¥–∞–Ω–Ω—ã—Ö).
- –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø—É—Ç–∏ –≤—Å–µ—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (json, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π): —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä—è–º–æ –≤ `{task_dir}`.

#### **4Ô∏è‚É£ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (use_cache)**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ö–∞–Ω–∏–∑–º: –µ—Å–ª–∏ —Ö—ç—à –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ + –¥–∞–Ω–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–∞–µ—Ç, —á–∏—Ç–∞–µ–º –≥–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ `{task_dir}/cache`.

#### **5Ô∏è‚É£ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pamola_core.utils.visualization.
- –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ (png) —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `{task_dir}`.

---

### üìã –ß–µ–∫–ª–∏—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
| –ë–ª–æ–∫                     | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                                                                      |
|--------------------------|------------------------------------------------------------------------------------------------|
| base_anonymization_op.py | execute(), progress, unified errors                                                             |
| numeric_op.py            | —É–±—Ä–∞—Ç—å run, progress, process_value, use_cache, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ task_dir                           |
| metric_utils            | –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ op_data_writer                                                                    |
| processing_utils        | –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å batch                                                                 |
| validation_utils        | –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ unified error reporting                                                             |
| caching (use_cache)     | task_dir/cache, –ø—Ä–æ—Å—Ç–æ–π pickle/parquet                                                         |
| visualizations          | task_dir, png —á–µ—Ä–µ–∑ visualization utils                                                        |

---

### ‚ùì –í–æ–ø—Ä–æ—Å—ã –∏–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

| –í–æ–ø—Ä–æ—Å                                                                                       | –û—Ç–≤–µ—Ç                                                                                                                                                       |
|---------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| –ï—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ BaseOperation.run()?                                                    | –î–∞, —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å execute() ‚Üí process_batch(), –±–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ run().                                                                             |
| –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç DataSource?                                                            | DataSource –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DataFrame —á–µ—Ä–µ–∑ get_dataframe("main"), –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è in-place –∏–ª–∏ —Å –∫–æ–ø–∏—è–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞.                         |
| –ë—ã–ª–∏ –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ progress tracking?                                                    | –î–∞, –¥–æ–±–∞–≤–ª–µ–Ω progress_tracker, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º, –æ–±–Ω–æ–≤–ª—è—è —à–∞–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏.                                                               |
| –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã?                                                      | –ß–µ—Ä–µ–∑ unified artifact registration, –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ {task_dir}, json ‚Äî —á–µ—Ä–µ–∑ op_data_writer, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî —á–µ—Ä–µ–∑ visualization utils.                    |
| –ï—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –¥–ª—è error handling?                                                | –î–∞, –æ—à–∏–±–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ OperationResult –∏ logger.                                                              |
| –ù—É–∂–Ω–æ –ª–∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å validation_utils –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ ops?                         | –ü–æ–∫–∞ –æ—Å—Ç–∞–≤–∏—Ç—å validation_utils, –Ω–æ –∏—Ö –æ—à–∏–±–∫–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –∫–∞–∫ OperationResult —Å unified reporting, –∞ –Ω–µ ValueError.                                       |
| –°–ª–µ–¥—É–µ—Ç –ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å direct DataFrame modification –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω?      | –°–æ—Ö—Ä–∞–Ω—è–µ–º direct modification, –Ω–æ —Å–ª–µ–¥–∏–º, —á—Ç–æ–±—ã DataSource abstraction —É—á–∏—Ç—ã–≤–∞–ª —ç—Ç–æ (in-place vs. enriched).                                                |
| –ï—Å—Ç—å –ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ chunked processing?                                           | –î–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å process_in_chunks –∏–∑ commons/processing_utils –∏–ª–∏ pamola_core/utils/ops.                                                                          |
| –ë—ã–ª–∏ –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π?                                                 | –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é —Å–∏—Å—Ç–µ–º—É (pamola_core.utils.visualization), –Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ–º –ø—É—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–≤—Å—ë –≤ {task_dir}).                                     |
| –ï—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è?                                                      | –î–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π logger –∏–∑ ops, –≤—Å–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –∏–ª–∏ –ø–µ—á–∞—Ç–∞—Ç—å—Å—è –≤ stdout.        |

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Mermaid-–¥–∏–∞–≥—Ä–∞–º–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã. –°–∫–∞–∂–∏, –Ω—É–∂–Ω–æ –ª–∏ —ç—Ç–æ.

